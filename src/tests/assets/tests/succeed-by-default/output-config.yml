jobs:
  failing-job:
    docker:
    - image: cimg/base
    steps:
    - run: exit 1
  succeeding-job:
    docker:
    - image: cimg/base
    steps:
    - run: exit 0
version: 2.1
workflows:
  fail:
    jobs:
    - failing-job:
      steps:
        - run: exit 0
    - failing-job:
      steps:
        - run: exit 0
    - trigger-failing-job:
        context: global
        type: approval
        steps:
          - failing-job
    - trigger-failing-job:
        context: global
        type: approval
        steps:
          - failing-job
  run-succeed-and-fail:
    jobs:
    - succeeding-job:
      context: global
      type: approval
    - failing-job:
      steps:
        - run: exit 0
    - trigger-failing-job:
        context: global
        requires:
        - succeeding-job
        type: approval
  succeed:
    jobs:
    - succeeding-job:
      context: global
      type: approval
  version: 2
